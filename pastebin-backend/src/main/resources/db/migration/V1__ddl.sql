CREATE TABLE pastes
(
    hash VARCHAR(6) NOT NULL PRIMARY KEY,
    title VARCHAR(50) NOT NULL,
    author VARCHAR(100) NOT NULL,
    content_path VARCHAR(200) NOT NULL,
    created_at TIMESTAMP NOT NULL,
    expired_at TIMESTAMP NOT NULL,
    CONSTRAINT hash_unique UNIQUE (hash)
);

CREATE TABLE tags
(
    id BIGINT NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name VARCHAR(50) NOT NULL,
    CONSTRAINT name_unique UNIQUE (name)
);

CREATE TABLE pastes_tags
(
    id BIGINT NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    paste_hash VARCHAR(6) NOT NULL REFERENCES pastes(hash) ON DELETE CASCADE,
    tag_id BIGINT NOT NULL REFERENCES tags(id) ON DELETE CASCADE,
    CONSTRAINT users_roles_unique UNIQUE (paste_hash, tag_id)
);